[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.

[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

[GIN-debug] GET    /uploads/generated/:filename --> main.setupRouter.func1 (6 handlers)
[GIN-debug] HEAD   /uploads/generated/:filename --> main.setupRouter.func1 (6 handlers)
[GIN-debug] GET    /health                   --> main.setupRouter.func2 (6 handlers)
[GIN-debug] GET    /health/db                --> main.setupRouter.func3 (6 handlers)
2025/06/10 15:10:27 Using Gemini Repository for image generation.
[GIN-debug] POST   /api/v1/auth/login        --> github.com/45ai/backend/internal/handler.AuthHandler.Login-fm (6 handlers)
[GIN-debug] GET    /api/v1/templates         --> github.com/45ai/backend/internal/handler.TemplateHandler.GetAll-fm (6 handlers)
[GIN-debug] GET    /api/v1/templates/:id     --> github.com/45ai/backend/internal/handler.TemplateHandler.GetByID-fm (6 handlers)
[GIN-debug] GET    /api/v1/me                --> github.com/45ai/backend/internal/handler.UserHandler.GetProfile-fm (7 handlers)
[GIN-debug] PUT    /api/v1/me                --> github.com/45ai/backend/internal/handler.UserHandler.UpdateProfile-fm (7 handlers)
[GIN-debug] GET    /api/v1/me/transactions   --> github.com/45ai/backend/internal/handler.UserHandler.GetTransactions-fm (7 handlers)
[GIN-debug] POST   /api/v1/generate          --> github.com/45ai/backend/internal/handler.GenerationHandler.GenerateImage-fm (7 handlers)
[GIN-debug] GET    /api/v1/generate/:job_id/status --> github.com/45ai/backend/internal/handler.GenerationHandler.GetGenerationStatus-fm (7 handlers)
[GIN-debug] GET    /api/v1/generate/:job_id  --> github.com/45ai/backend/internal/handler.GenerationHandler.GetGenerationResult-fm (7 handlers)
2025/06/10 15:10:27 Starting 2 queue workers
2025/06/10 15:10:27 Worker 2 started
2025/06/10 15:10:27 Worker 1 started
2025/06/10 15:10:27 Server starting on port 8080 in development mode
[GIN] 2025/06/10 - 15:10:32 | 200 |     489.291µs |             ::1 | GET      "/health"
[GIN] 2025/06/10 - 15:10:32 | 200 |     582.375µs |             ::1 | GET      "/health"
[GIN] 2025/06/10 - 15:10:41 | 200 |    6.717666ms |             ::1 | POST     "/api/v1/auth/login"
[GIN] 2025/06/10 - 15:10:41 | 200 |    7.006916ms |             ::1 | POST     "/api/v1/auth/login"
[GIN] 2025/06/10 - 15:11:19 | 200 |    1.220084ms |             ::1 | GET      "/health/db"
[GIN] 2025/06/10 - 15:11:19 | 200 |    1.290583ms |             ::1 | GET      "/health/db"
[GIN] 2025/06/10 - 15:11:30 | 200 |    2.133542ms |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 15:11:30 | 200 |    2.184417ms |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 15:25:56 | 200 |   17.372667ms |             ::1 | POST     "/api/v1/auth/login"
[GIN] 2025/06/10 - 15:25:56 | 200 |   18.332875ms |             ::1 | POST     "/api/v1/auth/login"
[GIN] 2025/06/10 - 15:27:03 | 200 |    1.934666ms |             ::1 | POST     "/api/v1/auth/login"
[GIN] 2025/06/10 - 15:27:03 | 200 |    2.109167ms |             ::1 | POST     "/api/v1/auth/login"
[GIN] 2025/06/10 - 15:53:32 | 200 |      4.5235ms |             ::1 | GET      "/health"
[GIN] 2025/06/10 - 15:53:32 | 200 |    5.722958ms |             ::1 | GET      "/health"
[GIN] 2025/06/10 - 15:57:19 | 204 |    8.426792ms |             ::1 | OPTIONS  "/api/v1/me/transactions"
[GIN] 2025/06/10 - 15:57:19 | 204 |   11.329542ms |             ::1 | OPTIONS  "/api/v1/me/transactions"
[GIN] 2025/06/10 - 15:57:19 | 204 |    8.948792ms |             ::1 | OPTIONS  "/api/v1/me"
[GIN] 2025/06/10 - 15:57:19 | 204 |   13.888584ms |             ::1 | OPTIONS  "/api/v1/me"
[GIN] 2025/06/10 - 15:57:19 | 401 |    1.999042ms |             ::1 | GET      "/api/v1/me/transactions"
[GIN] 2025/06/10 - 15:57:19 | 401 |    2.039416ms |             ::1 | GET      "/api/v1/me/transactions"
[GIN] 2025/06/10 - 15:57:19 | 401 |    2.277583ms |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 15:57:19 | 401 |    2.441917ms |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 15:57:20 | 401 |     130.917µs |             ::1 | GET      "/api/v1/me/transactions"
[GIN] 2025/06/10 - 15:57:20 | 401 |    2.696417ms |             ::1 | GET      "/api/v1/me/transactions"
[GIN] 2025/06/10 - 15:57:20 | 401 |     191.375µs |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 15:57:20 | 401 |     584.083µs |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 15:57:22 | 401 |      677.75µs |             ::1 | GET      "/api/v1/me/transactions"
[GIN] 2025/06/10 - 15:57:22 | 401 |     932.125µs |             ::1 | GET      "/api/v1/me/transactions"
[GIN] 2025/06/10 - 15:57:22 | 401 |      22.584µs |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 15:57:22 | 401 |      74.083µs |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 15:57:22 | 401 |      23.708µs |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 15:57:22 | 401 |      95.709µs |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 15:57:23 | 401 |      45.625µs |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 15:57:23 | 401 |     126.709µs |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 15:57:25 | 401 |      39.708µs |             ::1 | GET      "/api/v1/me/transactions"
[GIN] 2025/06/10 - 15:57:25 | 401 |     527.958µs |             ::1 | GET      "/api/v1/me/transactions"
[GIN] 2025/06/10 - 15:57:25 | 401 |         115µs |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 15:57:25 | 401 |     210.167µs |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 15:57:25 | 401 |      74.833µs |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 15:57:25 | 401 |     161.083µs |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 15:57:28 | 401 |        39.5µs |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 15:57:28 | 401 |     106.333µs |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 15:57:43 | 204 |     194.584µs |             ::1 | OPTIONS  "/api/v1/billing/purchase"
[GIN] 2025/06/10 - 15:57:43 | 204 |     744.958µs |             ::1 | OPTIONS  "/api/v1/billing/purchase"
[GIN] 2025/06/10 - 15:57:43 | 404 |      18.167µs |             ::1 | POST     "/api/v1/billing/purchase"
[GIN] 2025/06/10 - 15:57:43 | 404 |         169µs |             ::1 | POST     "/api/v1/billing/purchase"
[GIN] 2025/06/10 - 15:57:44 | 404 |       5.417µs |             ::1 | POST     "/api/v1/billing/purchase"
[GIN] 2025/06/10 - 15:57:44 | 404 |       193.5µs |             ::1 | POST     "/api/v1/billing/purchase"
[GIN] 2025/06/10 - 15:57:46 | 404 |      31.167µs |             ::1 | POST     "/api/v1/billing/purchase"
[GIN] 2025/06/10 - 15:57:46 | 404 |     127.084µs |             ::1 | POST     "/api/v1/billing/purchase"
[GIN] 2025/06/10 - 15:57:49 | 404 |      21.834µs |             ::1 | POST     "/api/v1/billing/purchase"
[GIN] 2025/06/10 - 15:57:49 | 404 |    1.071625ms |             ::1 | POST     "/api/v1/billing/purchase"
[GIN] 2025/06/10 - 15:57:57 | 401 |      358.25µs |             ::1 | GET      "/api/v1/me/transactions"
[GIN] 2025/06/10 - 15:57:57 | 401 |     743.125µs |             ::1 | GET      "/api/v1/me/transactions"
[GIN] 2025/06/10 - 15:57:57 | 401 |     368.291µs |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 15:57:57 | 401 |     933.458µs |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 15:57:58 | 401 |      26.208µs |             ::1 | GET      "/api/v1/me/transactions"
[GIN] 2025/06/10 - 15:57:58 | 401 |       86.75µs |             ::1 | GET      "/api/v1/me/transactions"
[GIN] 2025/06/10 - 15:57:58 | 401 |      32.125µs |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 15:57:58 | 401 |     154.625µs |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 15:58:00 | 401 |     165.584µs |             ::1 | GET      "/api/v1/me/transactions"
[GIN] 2025/06/10 - 15:58:00 | 401 |     283.667µs |             ::1 | GET      "/api/v1/me/transactions"
[GIN] 2025/06/10 - 15:58:00 | 401 |      194.25µs |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 15:58:00 | 401 |     909.583µs |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 15:58:03 | 401 |     124.458µs |             ::1 | GET      "/api/v1/me/transactions"
[GIN] 2025/06/10 - 15:58:03 | 401 |     483.541µs |             ::1 | GET      "/api/v1/me/transactions"
[GIN] 2025/06/10 - 15:58:03 | 401 |     231.125µs |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 15:58:03 | 401 |     749.084µs |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 15:58:11 | 204 |      49.834µs |             ::1 | OPTIONS  "/api/v1/templates/1"
[GIN] 2025/06/10 - 15:58:11 | 204 |      172.25µs |             ::1 | OPTIONS  "/api/v1/templates/1"
[GIN] 2025/06/10 - 15:58:11 | 200 |     18.8455ms |             ::1 | GET      "/api/v1/templates/1"
[GIN] 2025/06/10 - 15:58:11 | 200 |   18.903959ms |             ::1 | GET      "/api/v1/templates/1"
[GIN] 2025/06/10 - 16:04:51 | 204 |    3.271875ms |             ::1 | OPTIONS  "/api/v1/auth/logout"
[GIN] 2025/06/10 - 16:04:51 | 204 |     5.32275ms |             ::1 | OPTIONS  "/api/v1/auth/logout"
[GIN] 2025/06/10 - 16:04:51 | 404 |     177.083µs |             ::1 | POST     "/api/v1/auth/logout"
[GIN] 2025/06/10 - 16:04:51 | 404 |     281.834µs |             ::1 | POST     "/api/v1/auth/logout"
[GIN] 2025/06/10 - 16:04:52 | 404 |       9.333µs |             ::1 | POST     "/api/v1/auth/logout"
[GIN] 2025/06/10 - 16:04:52 | 404 |     139.458µs |             ::1 | POST     "/api/v1/auth/logout"
[GIN] 2025/06/10 - 16:04:54 | 404 |       5.625µs |             ::1 | POST     "/api/v1/auth/logout"
[GIN] 2025/06/10 - 16:04:54 | 404 |     100.292µs |             ::1 | POST     "/api/v1/auth/logout"
[GIN] 2025/06/10 - 16:04:55 | 204 |      12.083µs |             ::1 | OPTIONS  "/api/v1/auth/login"
[GIN] 2025/06/10 - 16:04:55 | 204 |     124.625µs |             ::1 | OPTIONS  "/api/v1/auth/login"
[GIN] 2025/06/10 - 16:04:55 | 200 |   22.465625ms |             ::1 | POST     "/api/v1/auth/login"
[GIN] 2025/06/10 - 16:04:55 | 200 |   22.535041ms |             ::1 | POST     "/api/v1/auth/login"
[GIN] 2025/06/10 - 16:04:57 | 204 |      12.833µs |             ::1 | OPTIONS  "/api/v1/auth/logout"
[GIN] 2025/06/10 - 16:04:57 | 204 |     516.208µs |             ::1 | OPTIONS  "/api/v1/auth/logout"
[GIN] 2025/06/10 - 16:04:57 | 404 |       4.459µs |             ::1 | POST     "/api/v1/auth/logout"
[GIN] 2025/06/10 - 16:04:57 | 404 |     132.625µs |             ::1 | POST     "/api/v1/auth/logout"
[GIN] 2025/06/10 - 16:05:06 | 200 |    2.343458ms |             ::1 | POST     "/api/v1/auth/login"
[GIN] 2025/06/10 - 16:05:06 | 200 |    2.655333ms |             ::1 | POST     "/api/v1/auth/login"
[GIN] 2025/06/10 - 16:05:13 | 204 |      30.167µs |             ::1 | OPTIONS  "/api/v1/me"
[GIN] 2025/06/10 - 16:05:13 | 204 |     438.541µs |             ::1 | OPTIONS  "/api/v1/me"
[GIN] 2025/06/10 - 16:05:13 | 200 |    2.479625ms |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 16:05:13 | 200 |    2.534209ms |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 16:05:19 | 204 |      31.584µs |             ::1 | OPTIONS  "/api/v1/me"
[GIN] 2025/06/10 - 16:05:19 | 204 |     396.041µs |             ::1 | OPTIONS  "/api/v1/me"
[GIN] 2025/06/10 - 16:05:19 | 200 |    5.324084ms |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 16:05:19 | 200 |    5.411375ms |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 16:05:19 | 204 |       7.375µs |             ::1 | OPTIONS  "/api/v1/templates/2"
[GIN] 2025/06/10 - 16:05:19 | 204 |      63.334µs |             ::1 | OPTIONS  "/api/v1/templates/2"
[GIN] 2025/06/10 - 16:05:19 | 200 |    1.699166ms |             ::1 | GET      "/api/v1/templates/2"
[GIN] 2025/06/10 - 16:05:19 | 200 |    1.733125ms |             ::1 | GET      "/api/v1/templates/2"
[GIN] 2025/06/10 - 16:14:18 | 204 |    3.005083ms |             ::1 | OPTIONS  "/api/v1/me"
[GIN] 2025/06/10 - 16:14:18 | 204 |     4.38075ms |             ::1 | OPTIONS  "/api/v1/me"
[GIN] 2025/06/10 - 16:14:18 | 200 |   41.492791ms |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 16:14:18 | 200 |   41.538083ms |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 16:14:18 | 204 |       9.709µs |             ::1 | OPTIONS  "/api/v1/templates/2"
[GIN] 2025/06/10 - 16:14:18 | 204 |     134.583µs |             ::1 | OPTIONS  "/api/v1/templates/2"
[GIN] 2025/06/10 - 16:14:18 | 200 |    3.965833ms |             ::1 | GET      "/api/v1/templates/2"
[GIN] 2025/06/10 - 16:14:18 | 200 |    4.037709ms |             ::1 | GET      "/api/v1/templates/2"
[GIN] 2025/06/10 - 18:07:07 | 404 |    2.608083ms |             ::1 | HEAD     "/api/v1/generate"
[GIN] 2025/06/10 - 18:07:07 | 404 |    8.352791ms |             ::1 | HEAD     "/api/v1/generate"
[GIN] 2025/06/10 - 18:07:12 | 404 |      72.833µs |             ::1 | HEAD     "/health"
[GIN] 2025/06/10 - 18:07:12 | 404 |     378.292µs |             ::1 | HEAD     "/health"
[GIN] 2025/06/10 - 18:07:24 | 404 |      55.292µs |             ::1 | HEAD     "/health"
[GIN] 2025/06/10 - 18:07:24 | 404 |     560.542µs |             ::1 | HEAD     "/health"
[GIN] 2025/06/10 - 18:07:52 | 200 |      2.2335ms |             ::1 | GET      "/health"
[GIN] 2025/06/10 - 18:07:52 | 200 |    2.635584ms |             ::1 | GET      "/health"
[GIN] 2025/06/10 - 18:07:58 | 401 |     797.834µs |             ::1 | POST     "/api/v1/generate"
[GIN] 2025/06/10 - 18:07:58 | 401 |     954.083µs |             ::1 | POST     "/api/v1/generate"
[GIN] 2025/06/10 - 18:08:17 | 204 |         535µs |             ::1 | OPTIONS  "/api/v1/me"
[GIN] 2025/06/10 - 18:08:17 | 204 |     883.708µs |             ::1 | OPTIONS  "/api/v1/me"
[GIN] 2025/06/10 - 18:08:17 | 200 |   23.343125ms |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 18:08:17 | 200 |   23.405791ms |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 18:08:17 | 204 |       8.958µs |             ::1 | OPTIONS  "/api/v1/templates/2"
[GIN] 2025/06/10 - 18:08:17 | 204 |      53.333µs |             ::1 | OPTIONS  "/api/v1/templates/2"
[GIN] 2025/06/10 - 18:08:17 | 200 |     216.541µs |             ::1 | GET      "/api/v1/templates/2"
[GIN] 2025/06/10 - 18:08:17 | 200 |     237.708µs |             ::1 | GET      "/api/v1/templates/2"
[GIN] 2025/06/10 - 18:08:30 | 204 |     221.583µs |             ::1 | OPTIONS  "/api/v1/me"
[GIN] 2025/06/10 - 18:08:30 | 204 |    2.299458ms |             ::1 | OPTIONS  "/api/v1/me"
[GIN] 2025/06/10 - 18:08:30 | 200 |   10.463209ms |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 18:08:30 | 200 |   10.511667ms |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 18:08:30 | 204 |      10.833µs |             ::1 | OPTIONS  "/api/v1/me"
[GIN] 2025/06/10 - 18:08:30 | 204 |     109.917µs |             ::1 | OPTIONS  "/api/v1/me"
[GIN] 2025/06/10 - 18:08:30 | 200 |     860.791µs |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 18:08:30 | 200 |      898.75µs |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 18:08:39 | 204 |    1.656959ms |             ::1 | OPTIONS  "/api/v1/me"
[GIN] 2025/06/10 - 18:08:39 | 204 |    2.641916ms |             ::1 | OPTIONS  "/api/v1/me"
[GIN] 2025/06/10 - 18:08:39 | 200 |   31.404334ms |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 18:08:39 | 200 |   31.471833ms |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 18:08:39 | 204 |      15.625µs |             ::1 | OPTIONS  "/api/v1/me"
[GIN] 2025/06/10 - 18:08:39 | 204 |      353.25µs |             ::1 | OPTIONS  "/api/v1/me"
[GIN] 2025/06/10 - 18:08:39 | 200 |      355.75µs |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 18:08:39 | 200 |     404.833µs |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 18:09:15 | 204 |      72.583µs |             ::1 | OPTIONS  "/api/v1/me"
[GIN] 2025/06/10 - 18:09:15 | 204 |     294.833µs |             ::1 | OPTIONS  "/api/v1/me"
[GIN] 2025/06/10 - 18:09:15 | 200 |    2.488834ms |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 18:09:15 | 200 |    2.618416ms |             ::1 | GET      "/api/v1/me"
[GIN] 2025/06/10 - 18:09:15 | 204 |       9.334µs |             ::1 | OPTIONS  "/api/v1/templates/2"
[GIN] 2025/06/10 - 18:09:15 | 204 |     546.625µs |             ::1 | OPTIONS  "/api/v1/templates/2"
[GIN] 2025/06/10 - 18:09:15 | 200 |     563.666µs |             ::1 | GET      "/api/v1/templates/2"
[GIN] 2025/06/10 - 18:09:15 | 200 |     596.708µs |             ::1 | GET      "/api/v1/templates/2"
[GIN] 2025/06/10 - 18:12:17 | 200 |    4.516667ms |             ::1 | GET      "/health"
[GIN] 2025/06/10 - 18:12:17 | 200 |    8.687958ms |             ::1 | GET      "/health"
[GIN] 2025/06/10 - 18:12:24 | 401 |     505.125µs |             ::1 | POST     "/api/v1/generate"
[GIN] 2025/06/10 - 18:12:24 | 401 |     629.125µs |             ::1 | POST     "/api/v1/generate"
[GIN] 2025/06/10 - 19:00:21 | 200 |    2.755125ms |             ::1 | GET      "/health"
[GIN] 2025/06/10 - 19:00:21 | 200 |    4.398083ms |             ::1 | GET      "/health"
[GIN] 2025/06/10 - 19:07:21 | 200 |    2.563834ms |             ::1 | GET      "/health"
[GIN] 2025/06/10 - 19:07:21 | 200 |    3.392584ms |             ::1 | GET      "/health"
[GIN] 2025/06/10 - 19:08:01 | 500 |     317.359ms |             ::1 | POST     "/api/v1/auth/login"
[GIN] 2025/06/10 - 19:08:01 | 500 |  317.784625ms |             ::1 | POST     "/api/v1/auth/login"
[GIN] 2025/06/10 - 19:08:33 | 500 |     18.5975ms |             ::1 | POST     "/api/v1/auth/login"
[GIN] 2025/06/10 - 19:08:33 | 500 |   18.830458ms |             ::1 | POST     "/api/v1/auth/login"
[GIN] 2025/06/10 - 19:09:09 | 500 |   31.890792ms |             ::1 | POST     "/api/v1/auth/login"
[GIN] 2025/06/10 - 19:09:09 | 500 |   32.799959ms |             ::1 | POST     "/api/v1/auth/login"
2025/06/10 19:09:24 Shutting down server...
2025/06/10 19:09:24 Server exiting
