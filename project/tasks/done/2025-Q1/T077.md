---
id: T077
title: Fix Static File Serving for Generated Images
status: Done
epic: E03
effort: S
risk: Low
dependencies: [T072]
assignee: CursorAgent
updated_at: 2025-01-28
---

### Description

Fix the static file serving route for generated images. Currently, the backend generates images and stores them in uploads/generated/ but the static file serving returns 404 errors. Frontend needs to be able to access generated images via HTTP URLs.

### Acceptance Criteria

- [ ] Fix static file serving route in main.go for /uploads/generated/ directory
- [ ] Ensure proper CORS headers for image requests
- [ ] Test image access via direct URL (e.g., http://localhost:8080/uploads/generated/image.png)
- [ ] Add proper content-type headers for PNG images
- [ ] Implement directory security (prevent directory listing)
- [ ] Add cache headers for better performance

### Context Binding

- **Code:** `@/backend/cmd/api/main.go`
- **Code:** `@/backend/uploads/generated/` (directory structure)

### Technical Requirements

**Static File Route:**
- Serve /uploads/generated/* files with proper headers
- Use gin.Static() or custom handler for file serving
- Ensure CORS compatibility with frontend

**Security:**
- Prevent directory traversal attacks
- No directory listing
- Validate file extensions (only .png)

**Performance:**
- Add cache-control headers
- Serve files efficiently

### Test Plan

- Generate an image via API
- Access image directly: `curl http://localhost:8080/uploads/generated/[filename].png`
- Verify image displays in browser
- Test CORS from frontend domain

### Agent Notes

*Simple task - just need proper static file serving configuration in Gin router. Critical for frontend image display.* 